---
description: Project overview and architecture context for vmspawn
alwaysApply: true
---

# vmspawn Project Context

vmspawn is a **Bash CLI tool** for batch VM creation on OpenShift Virtualization. There is no build step -- the main script (`vmspawn`) is executed directly.

## Architecture

- `vmspawn` -- main script (~991 lines of Bash)
- `templates/` -- YAML templates with `{PLACEHOLDER}` syntax, processed by `sed`
- `helpers/` -- utility scripts and cloud-init YAML configs
- `tests/vmspawn.bats` -- Bats unit tests (dry-run and mock-based)
- `docs/` -- project documentation (Markdown)
- `logs/` -- created at runtime for batch manifests and logs

## Clone Modes

1. **Snapshot**: DataSource -> base DV -> VolumeSnapshot -> VM clones (default for OCS)
2. **Direct DataSource**: DataSource -> each VM clones directly (no-snapshot or WFFC storage)
3. **URL import**: URL -> base DV -> VM clones from base PVC

All resources are tagged with a 6-character hex **batch ID** and carry `batch-id` and `vm-basename` labels.

## Dependencies

- **Runtime**: `bash`, `oc` (OpenShift CLI), `xxd`, `sed`
- **Testing**: `bats`
- **CI**: GitHub Actions running `bats`, `yamllint`, `markdownlint-cli2`
